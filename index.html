<!DOCTYPE html>













<html class="theme-next mist" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Cpiz&apos;s blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Cpiz&#39;s blog">
<meta property="og:url" content="http://cpiz.com/index.html">
<meta property="og:site_name" content="Cpiz&#39;s blog">
<meta property="og:description" content="Cpiz&apos;s blog">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cpiz&#39;s blog">
<meta name="twitter:description" content="Cpiz&apos;s blog">



  <link rel="alternate" href="/atom.xml" title="Cpiz's blog" type="application/atom+xml" />




  <link rel="canonical" href="http://cpiz.com/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Cpiz's blog</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Cpiz's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    
  
  
  
    
      
    
    <a href="https://github.com/cpiz" class="github-corner" target="_blank" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#222; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg>
    
      </a>
    



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cpiz.com/2017/01/17/小程序周记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cpiz">
      <meta itemprop="description" content="Cpiz's blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cpiz's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/17/小程序周记/" itemprop="url">
                  小程序周记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-01-17 20:49:00" itemprop="dateCreated datePublished" datetime="2017-01-17T20:49:00+08:00">2017-01-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-05-24 15:04:32" itemprop="dateModified" datetime="2018-05-24T15:04:32+08:00">2018-05-24</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/category/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>截止今日，微信小程序正式开放一周。作为一个参与者，同时也是观察者，我来回顾一下这周微信小程序见闻与体验。</p>
<h2 id="前夜"><a href="#前夜" class="headerlink" title="前夜"></a>前夜</h2><p>1月8日，小程序发布前夜。我加入的两个小程序微信群开始热闹起来，大家纷纷猜测小程序究竟会当夜开放还是次日开放，或者是延期。有部分觉悟慢的同学还在临时抱佛脚，问一些很基础的问题。我当时猜测应该会等到9号白天上班后发布，理由是系统太庞大，夜里发布如果出了问题，可能不好找人解决。</p>
<p>9日0点，群里突然炸开，连续出现了小程序的分享名片，微信小程序踩着0点正式开放了！捂着热辣辣的脸，我只能佩服微信团队艺高胆大，半夜发布意味着整个鹅厂与此相关的员工都在待命。</p>
<p>匆忙打开电脑进入小程序后台，原来不可用的发布按钮已经可以点击了，接下来扫描二维码确认身份，发布了我的小程序「100房贷助手」几天前的已过审版本，然后又把最近提的一个体验版本提交了审核。由于微信审核的不可测原理，估计很多开发者都和我一样：尽早提审了第一个版本来确保赶上9号的发布，等到通过审核时，第二个版本也准备好了，只能Hold着等首个版本发出后再提。</p>
<p>微信群里越来越热，大家都在发自己的小程序名片，也分享在别处看到的小程序，还有抱着不同目的的人迅速组织了更多的微信群，我进了两三个，质量都不高。这两天读了一篇某个小程序项目团队的分享，说他们当晚加了200多个微信群和300多个QQ群来做产品曝光，这确实给我上了一课。</p>
<p>微信半夜小程序发布的好处是夜里用户量少，对系统冲击也少。让一批开发者和IT媒体们提前体验正好相当于灰度，也能趁天亮前有时间做些调整。更大的好处是：大多数小程序开发者都在等零点可能发布，媒体们也在摩拳擦掌，等普通用户们第二天起床处于信息饥饿状态时，新鲜的小程序资讯正好送上。</p>
<h2 id="发布日"><a href="#发布日" class="headerlink" title="发布日"></a>发布日</h2><p>9日早晨，我起床注意到的第一条消息不是新闻，而是昨晚提交的版本已经审核通过的通知。<br><img src="http://static.zybuluo.com/caipiz/3nm8fcqtv5cdmjebk67x9434/image_1b6jp9kru1tdl36j15lfrsokph9.png" alt="image_1b6jp9kru1tdl36j15lfrsokph9.png-90.6kB"><br>之前两次审核分别用了6天值1天，这次竟然8小时神速过审，应该是微信预料了发布日的拥挤，安排了加班甚至是通宵在处理审核。</p>
<p>我擦了擦眼睛，迅速进行了发布。同时注意到，不同于首个版本的发布即可见，当已经有旧版本在线上时，新版本发布大概要延后3分钟生效。当然这比我们传统的APP发布要等待用户逐渐升级快速多了。</p>
<p>媒体果然爆炸了，朋友圈和知乎里到处是小程序的话题。得益于赶上了首批发布，我在几个微信群里做了入口分享，而且发布的前几天我在<code>知晓程序</code>的小程序商店(minapp.com)里提交了产品介绍。「100房贷助手」在当天很多小程序新闻稿中得到了曝光，后台监控到不断有新用户进来体验，为此我赶紧多加了一个服务节点避免过载。</p>
<p>其实首日发布的小程序并不多，微信在9月份开放了200个小程序内测名额，这些公司也成了首日为微信小程序站台的主体。我个人看来，除了通过微信分享卡片式的小程序页面能提升一些体验，其他惊喜并不多，很少有H5做不到只能小程序才能完成的场景。</p>
<p>更大的尴尬是：越有影响力的大厂们越能更早开发出更完善的小程序，也有更大的吸引力来让用户体验他们的小程序。但往往这样的大厂都是通过线上来变现的，当把用户吸引进了一个他们无法变现的小程序黑洞中，那自己也就没了生路。很多低频的APP被用户卸载，这让厂家很心痛，但却合理至极。</p>
<h2 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h2><p>第一天结束时媒体们傻眼了，昨天通宵赶文章还写微信即将要统治手机，看了一天下来发现不是这么回事，只能拿点段子交差。</p>
<p>接下来几天小程序热度明显下降，开有有少数公司停止了微信小程序的服务，还有部分类目被监管叫停。现在又有媒体出来泼冷水了，嘲笑微信没格局不开放。</p>
<p>其实微信也很委屈，本来期望的场景是线下，但反应最快传播也最快的总是线上，他们来了不爽就走。而线下的企业反应慢一些，服务铺开也需要时间，这需要更多的耐心来栽培。媒体自作多情，怪我咯？</p>
<h2 id="数据分享"><a href="#数据分享" class="headerlink" title="数据分享"></a>数据分享</h2><p>目前在小程序后台已经可以看到一周的数据统计，拿「100房贷助手」两个数据做一个简单的解读。</p>
<p><img src="http://static.zybuluo.com/caipiz/br6yxtxml02vzm9ot10d6cj0/image_1b6k0bi911m9iehh1j2d1gtf4qi13.png" alt="image_1b6k0bi911m9iehh1j2d1gtf4qi13.png-81.7kB"></p>
<p>第一天因为赶上首发名单得到了不错的曝光，用户量较高，但第二天数据则出现大幅下降，直到第6、7天开始趋稳。对于一个没有持续投放的小工具产品来说，这个趋势是很正常的。但这无疑也吻合了微信小程序的热度，即5天后该来尝鲜的用户已经来得差不多了。</p>
<p><img src="http://static.zybuluo.com/caipiz/cu3x76xxs3ofp05plmq3klzj/image_1b6k19kct1j0d8ng1gl0oek4v51g.png" alt="image_1b6k19kct1j0d8ng1gl0oek4v51g.png-173.3kB"></p>
<p>以上是小程序的百度指数，趋势接近。</p>
<p>虽然大部分用户是尝鲜游客，而且其中大部分并没有真正的使用（无有效数据录入），但也值得高兴。正是因为程序赶上了首发，获得了一定的曝光，才带来的这波“蜜蜂”。这些尝鲜的用户会帮忙分享给有需要的朋友，以后自已有需求了也可能再来。</p>
<p>另一个数据是平均停留时长<br><img src="http://static.zybuluo.com/caipiz/7xbmsxxw8sgzfhjqw29g9l4b/image_1b6m50srbuqektnr1nob1166e9.png" alt="image_1b6m50srbuqektnr1nob1166e9.png-86kB"><br>总体在缓慢增长，说明用户开始在正在的使用产品，这是好的现象。</p>
<p>微信可能在用完即走这个概念上走太极端了，后台竟然不支持最关键的用户存留分析，希望未来能够加入。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>一点经验和教训，如果再重来一次，怎么低成本让小程序在发布首日后获得更多用户呢？</p>
<ol>
<li>前期和发布日的大范围分享、投递。这会带来首批媒体稿中较高的曝光。</li>
<li>精美图标 + 有趣的名字。最好让人一看到就痒，产品曝光后更容易被尝鲜客试用。</li>
<li>有趣的内容，促使用户强烈的分享冲动（我相信分享是未来小程序的革命级特性）。</li>
<li>持续的价值 + 精美的制作。必须有持续的价值才能长久，精美制作有助于第二波的曝光与用户分享。</li>
</ol>
<p>最后再自问自答一次：小程序有没有红利？<br>没有通常意义的流量红利，只能算一次热点事件，而且已经结束了。我相信更长远的红利是有的，可能需要等待下一个杀手级小程序的引爆。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cpiz.com/2017/01/10/小程序「100房贷助手」诞生记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cpiz">
      <meta itemprop="description" content="Cpiz's blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cpiz's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/10/小程序「100房贷助手」诞生记/" itemprop="url">
                  小程序「100房贷助手」诞生记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-01-10 21:40:00" itemprop="dateCreated datePublished" datetime="2017-01-10T21:40:00+08:00">2017-01-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-05-24 14:52:43" itemprop="dateModified" datetime="2018-05-24T14:52:43+08:00">2018-05-24</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/category/项目/" itemprop="url" rel="index"><span itemprop="name">项目</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <img src="/2017/01/10/小程序「100房贷助手」诞生记/Mortgage_Calculator_title.png">
<blockquote>
<p>把自己的爱好作为职业是怎么样的体验？</p>
</blockquote>
<p>知乎有很多类似的讨论，我算是很符合要求的一人吧。从高中开始，编程就是我的爱好，因为爱好，选择了大学专业，选择了最终的职业。</p>
<p>做自己喜欢的事当然开心，但职业中的选择有限，很多的时候只能重复无聊或执行并不认同的工作。累觉不爱的时候就得找点真心想做的项目来弥补一下，所以对我来说编程既是工作，也是消遣。</p>
<p>11年的时候由于自己有需求，写了一个<a href="http://cpiz.com/post/blog/2011/07/mortgage_loan_calculator_excel_edition/">Excel版贷款计算器</a>，解决了<strong>利率变更</strong>和<strong>提前还款计算</strong>两个痛点，程序发布在网上也收获了不少用户的好评。但现在已经是移动互联网时代，经常只是想看一眼数据却得掏出PC和Excel这种重武器，还是不太方便，如果改成APP就好了。我把这个想法告诉了我的用户，他们也表示了很大的期待。</p>
<p>前阵子学习Android的新语言Kotlin，正好拿这个项目练手。Kotlin很赞，我很快上手并完成了核心算法，开始写界面。然后微信小程序来了，经过短暂的了解，我决定转向用小程序来实现。</p>
<h2 id="为什么用小程序？"><a href="#为什么用小程序？" class="headerlink" title="为什么用小程序？"></a>为什么用小程序？</h2><p>能力上，小程序基于阉割的H5，但微信提供了丰富的组件和API并保证了足够的性能，体验上和原生应用几乎无异，足够支持大部分的功能型应用。</p>
<p>成本上，它天生解决了跨平台的问题，意味着开发工作量可以减少一半，或者开发人员可以减掉一半。</p>
<p>交付上，有微信这个国民应用做Runtime，小程序只需要打包核心的代码逻辑，可以做到秒下秒开，将传统的APP扫码下载安装过程中的流失减到最低。直接发布的特性同时也解决了传统APP多平台、多版本兼容的问题。</p>
<p>推广上，微信已经占有了线上（消息）和线下（二维码）最大的渠道和入口，传统应用都不可避免要支持分享到微信和微信扫码。而小程序天然内置在微信中，基于微信好友和群的现成关系，很容易被传播分享。</p>
<p>以上都是我们传统APP开发者多年梦寐以求的特性，虽然小程序也有很多限制和不足，但对于我要做的这个小工具，它是完美的选择。</p>
<h2 id="我能收获什么？"><a href="#我能收获什么？" class="headerlink" title="我能收获什么？"></a>我能收获什么？</h2><p>我不打算在最短的时间内把它搞定然后不管，否则这比赶工作还更无趣，我更希望把它当做一次有趣的实践，尽可能体验从0到1这个过程中相关的一切。</p>
<p>JavaScript是现在最活跃的编程语言，不仅跨过了Web页和服务端，近一年大热的React Native和Weex已经开始攻占移动端的地盘。移动端开发者如果还不主动了解，那就太迟钝了。从小程序入门，正好是一个机会。</p>
<p>小程序是微信近两年最大的动作，目标和特性都昭示了巨大的野心。它究竟能做到什么程度，未来会如何发展，只有参与了才有可靠的判断。</p>
<p>工作中我负责客户端，跟产品磨跟UI磨跟后端跟测试磨，大量的时间用在沟通和等待上，最终的交付也有很多不甘的妥协。这次我一人全栈，终于有机会做一个只让自己满意的产品，顺便体验一下不同职能的思考，对未来工作也有益处。</p>
<p>从未接触过产品的运营和推广，想在小程序的生态中探索一下盈利模式。先定一个小目标：收回成本！</p>
<p>张小龙对微信的寄托是“做一款伟大的产品取悦自己”，不知道此生我有没有这样的机会，至少目前我还可以<strong>做一款满意的小程序取悦自己</strong>。</p>
<h2 id="「100房贷助手」的目标"><a href="#「100房贷助手」的目标" class="headerlink" title="「100房贷助手」的目标"></a>「100房贷助手」的目标</h2><p>买房是成家的必经之路，贷款又是买房的必经之路，起码中国如此。我经历过在银行办贷款签几十个名字的激动与担忧，合同还没看清楚就欠了上百万的负债，每月省吃俭用担心破产，央行降息让我暗暗开心，好不容易存了点钱去提前还款，又被银行大姐问到蒙圈。直到我认真研究了一下贷款的机制，开启了对理财的新认识。</p>
<p>我将我对贷款的知识与经验，装进这个小程序，并赋予它随时访问，轻松分享的能力。希望这个小工具，能<strong>帮助要购房和已购房的年轻人做点决策，清楚掌握自己的债务情况，做好财务规划，维持信用</strong>。</p>
<p>目前已经完成了基础的功能，还在继续打磨。如果你有更多的需要和建议，可以给我反馈。</p>
<p>谢谢！</p>
<hr>
<blockquote>
<p>准备贷款，想知道能承受多高的额度，月供多少。</p>
<p>已经贷款，央行宣布利息下/上调xx点，想知道月供会如何变化。</p>
<p>提前还款，想知道能缩短多少期限，节约多少利息。</p>
<p>用100房贷助手，让一切简单！</p>
</blockquote>
<p><img src="http://static.zybuluo.com/caipiz/0vyts9drr28iqbridxhdttpp/gh_1786c7d53423_258.jpg" alt="gh_1786c7d53423_258.jpg-29.7kB"></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cpiz.com/2016/12/21/我看微信小程序/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cpiz">
      <meta itemprop="description" content="Cpiz's blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cpiz's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/21/我看微信小程序/" itemprop="url">
                  我看微信小程序
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-12-21 01:38:00" itemprop="dateCreated datePublished" datetime="2016-12-21T01:38:00+08:00">2016-12-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-05-24 14:54:41" itemprop="dateModified" datetime="2018-05-24T14:54:41+08:00">2018-05-24</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/category/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今年的互联网媒体们可能不太容易，大行业不景气，风投退缩，巨头抱团，新概念泡沫，没什么话题好挖掘。9月，微信宣布小程序的概念，开始内测，媒体们仿佛鲨鱼闻到血，东西还没看见就炸开了锅，漫天评论：“微信要成操作系统了”、“没必要再开发APP了”、“H5要一统天下了”……</p>
<p>技术圈子也被点炸，这两年iOS和Android系统趋于稳定，大家终于踩完了坑开始琢磨造点新轮子，突然发现又要被前端抢饭碗，这怎么坐得住。</p>
<p>我对此也挺感兴趣，之前一直想业余做个贷款计算的小APP，又嫌兼顾iOS和Android麻烦一直没动手。小程序如果真能跨平台，这是最好的时机，正好也了解一下这项可能要“抢饭碗”的技术。</p>
<p>11月，微信开始小程序公测，经过了一番波折的注册与开发，目前我的程序已经通过审核，我也算对这个新平台有了真切的认识，可以谈谈看法了。</p>
<h2 id="小程序与微信"><a href="#小程序与微信" class="headerlink" title="小程序与微信"></a>小程序与微信</h2><p>先说结论：<strong>短期来看，小程序对于微信的价值远大于对企业的价值</strong>。</p>
<p>微信早已稳坐国内社交工具的头把交椅，基础功能已经很久没什么大革新，更多的努力在营造生态上，通过统一登录、二维码、支付、公众号等等把自己打造为联接一切的入口。</p>
<p>小程序对于微信，不是从0到1的新内容，它本身的能力并没有和之前的内嵌H5有本质的飞越。此时推出小程序平台，是因为<strong>微信对自己的生态的过去和未来都有了更清晰的洞见</strong>。</p>
<h3 id="不是红利，是清流"><a href="#不是红利，是清流" class="headerlink" title="不是红利，是清流"></a>不是红利，是清流</h3><p>2013年8月，微信推出公众号，打开了生态的大门。无数媒体、商家和机构的涌入，将微信从基础的工具建设为繁荣的平台。从市场的结果上来说这是巨大的成功，但从产品的角度上微信并不满意。第一次承担规则的制定者，微信已经足够谨慎，但仍然低估了商家无孔不入的手段。</p>
<p><strong>微信希望商家提供服务，用户用完即走</strong>，而<strong>商家希望用户订阅，以便日后勾搭</strong>。往往一个扫码 + H5的就能搞定的服务，却得通过扫码 + 关注 + 菜单来达成。繁琐的操作影响了用户的即时体验，后续的广告又伤害了长期的用户体验。</p>
<p>2016年1月11微信公开课Pro，张小龙首次公开演讲谈微信4大价值观，很不留情地指出商家过度营销实际伤害了微信，并在最后曝光了正在构思的应用号（即小程序）。<strong>小程序通过更强的能力来吸引商家支持，无须下载且无法关注（故意），并进一步限制了推送</strong>。</p>
<p>前两天的2017公开课上，张小龙提到小程序的启动日是16年1月9日，这就是说他在项目启动两天后就迫不及待地进行了宣布，可见当时他对小程序的期待。</p>
<p>我大胆揣测一下他的愿景：</p>
<ul>
<li>小程序搞定所有服务</li>
<li>卡券维持商家与用户的关系</li>
<li>订阅号专心做阅读</li>
<li>服务号老子不要了</li>
</ul>
<p>所以小程序不是什么操作系统和新红利，它目标是成为服务号与部分订阅号的升级替代，天生就带着限制商家的使命，是一股净化环境的清流。</p>
<h3 id="关键入口：二维码"><a href="#关键入口：二维码" class="headerlink" title="关键入口：二维码"></a>关键入口：二维码</h3><p>二维码其实是个古老的发明，早在Windows Mobile时代就出现在智能手机。当时在日本和台湾有一点应用，但在大陆还很鲜见，偶有新潮人士用来印在名片上别人也看不懂。</p>
<p>微信在11年底的3.5版本中就引入了二维码，是国内大厂里启动最早的，扫一扫加好友和登录Web微信都还是很新鲜的体验。12年5月，张小龙已经在朋友圈称二维码将是移动互联网的入口。当时我还没有太在意，如今，看见身边各种商品、广告和公共设施上都印上了二维码，中国成为世界上二维码最便利的国家，不得不佩服他的判断和感谢微信的推广。</p>
<p><img src="http://oi7ynvrxf.bkt.clouddn.com/snap/20161222004453.png" alt="张小龙朋友圈"></p>
<p><img src="http://oi7ynvrxf.bkt.clouddn.com/snap/20161222010152.png" alt="二维码百度指数"></p>
<p>从摇一摇到扫一扫，每一次入口的抢占与打通，都是微信的一次超越。小程序这次做的，就是进一步打通微信与服务，而且其关键的入口将仍然是二维码。</p>
<p>通过扫描二维码，我们通常能够到达：</p>
<ol>
<li>人（用户/群名片）</li>
<li>信息、服务的提供者（订阅号、服务号）</li>
<li>信息、服务（网页）</li>
<li>其他微信内置功能，如授权、支付</li>
</ol>
<p>小程序将改进第3点的体验与能力，让其达到与原生功能（第4点）相近的程度。尽管通过网页也能实现大部分的服务，但这种量变的影响很可能带来质变的反应。一旦成功，那微信将成为一切服务的入口</p>
<h3 id="线上入口在哪里"><a href="#线上入口在哪里" class="headerlink" title="线上入口在哪里"></a>线上入口在哪里</h3><p>官方的说法是仅提供有限的搜索和消息转发，结合小程序注册要求的命名推荐和唯一性要求，应该可以确定小程序搜索逻辑将和目前公众号的搜索区别不大。微信只提供运行的环境，用户应该由服务商自己去搞定。而且以小程序用完即走的目标，不急着用服务的用户根本不应该被打扰，所以干脆连分享到朋友圈的口子都不开。</p>
<p>我挺喜欢这个逻辑，简单又粗暴，微信从技术的角度也只能做到如此。只是等到1月9号开闸之后，一定有无数的公众号开始发布小程序的推荐和榜单，因为还有二维码这个口子在，朋友圈也难逃轰炸。</p>
<p>当用户使用过小程序之后，会有一个地方存放它们的图标，可以通过它们再次使用。而且这次安卓用户有特别的福利，如果你喜欢一个小程序，可以为它建立桌面图标，像普通应用一样运行。</p>
<p>对于这一点我倒是持保留意见，这增加了不同平台体验的差异，而且对小程序用完即走的精神是个反面的引导。</p>
<h2 id="什么样的小程序是好程序"><a href="#什么样的小程序是好程序" class="headerlink" title="什么样的小程序是好程序"></a>什么样的小程序是好程序</h2><p>任何对开发小程序有兴趣的公司或机构都应该先阅读这篇<a href="https://mp.weixin.qq.com/debug/wxadoc/product/index.html" target="_blank" rel="noopener">微信小程序平台运营规范</a>，有空的话再去看看张小龙这两届公开课上的演讲。我提炼后的大白话是只要<strong>能立即给用户带来价值的服务</strong>，关键字是<strong>立即</strong>和<strong>价值</strong>。</p>
<p>微信努力把小程序做到小而迅速，就是为了让用户能直达目标，所以<strong>应该努力避免让用户在小程序里做选择，而将这个过程前移，让用户看到二维码或链接名称的时候就知道将得到什么</strong>，经典的榜样是二维码支付。用户进入小程序后，最好在一两个页面内解决问题（原则上就不允许你超过5个页面），然后赶紧离开（每个页面都强制增加了关闭按钮）。</p>
<p>小程序发布前必须提交微信审核，提审时要求开发者选择一个类目。目前小程序类目的开放非常有限（<a href="http://www.wxapp-union.com/article-811-1.html" target="_blank" rel="noopener">参考</a>），而且审核非常严格，一旦不符就可能耽误近一周的审核时间（我的亲历）。还有，小程序最多圈定5个类目，这个范围每个月才允许修改一次。最近看到一些同学开发了不少社区类的小程序，我没有找到对应的类目，不知道到时候上不了线是怎样一种心情。</p>
<p>从诸多的限制上看，微信对于小程序的开发秉持了异常谨慎的态度。小程序的类目未来一定会逐渐开放，但现在不欢迎的东西以后也不会欢迎，很多厂商现在就可以死心了。</p>
<h2 id="适合小程序的业务场景"><a href="#适合小程序的业务场景" class="headerlink" title="适合小程序的业务场景"></a>适合小程序的业务场景</h2><p>首先繁荣的是将会是线下，一切你需要信息、服务、联接的场景的都可能有小程序需求，无脑列举一批</p>
<ul>
<li>生活、交通、旅游、餐饮类信息与服务获取（当你需要的时候，身边可能就有二维码）</li>
<li>医务、政务、商务的指引和办理（以前微信内的城市服务，很可能会被导出）</li>
<li>企业自己的办公小程序，家庭自己的内务小程序</li>
<li>智能硬件的控制类小程序，甚至任何商品上可能有服务类小程序（没准这才是物联网的第一阶段）</li>
</ul>
<p>线上入口更多会集中资讯、电商、工具类，我个人特别期待在教育类方向会出现一些新创新。</p>
<h2 id="小程序的未来"><a href="#小程序的未来" class="headerlink" title="小程序的未来"></a>小程序的未来</h2><p>距离小程序发布还有10来天，目前舆论的声音都是欣喜多于担忧，跌了好久的腾讯股票也在公开课后抬头。但就如我之前的结论：短期内小程序对于微信的价值大于企业，它的设计目标偏重用户单向索取服务，对于的收费服务这是利好，对于占大头的免费服务，却看得见用户摸不着钱包。如何满足这类企业的胃口，是微信下一个课题。</p>
<p>根据后续的反馈，小程序未来肯定会开放更多的类目，也有可能向个人开发者开放。我最期待的是增加盈利的途径，如广点通、捐赠，喂饱了开发者的平台才是好平台。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cpiz.com/2016/12/16/使用IDEA单步调试Leancloud云引擎服务/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cpiz">
      <meta itemprop="description" content="Cpiz's blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cpiz's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/16/使用IDEA单步调试Leancloud云引擎服务/" itemprop="url">
                  使用IDEA单步调试LeanCloud云引擎服务（Java）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-12-16 00:19:00" itemprop="dateCreated datePublished" datetime="2016-12-16T00:19:00+08:00">2016-12-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-05-24 14:48:43" itemprop="dateModified" datetime="2018-05-24T14:48:43+08:00">2018-05-24</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/category/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近在使用LeanCloud的云引擎服务，我使用了Java版SDK，在IDEA中进行项目开发（实际上写的是Kotlin语言）。LeanCloud云引擎提供了一个<code>lean.exe</code>的命令行工具，使用<code>lean up</code>命令可以启动一个http服务，非常方便本地测试。代码修改后使用IDEA重新编译一下即可热更新，不用重新执行命令。</p>
<p>如果业务复杂一些，可能需要加点日志来调查。但如果想跟进一步直接用IDEA单步调试，找遍了它们文档和社区都没有方法，也没有其他的网友分享过，所以今天研究了一下。</p>
<p>因为LeanCloud的Java版运行的是一个Jetty服务，我先尝试不用lean命令行，自己在IDEA中配置了Jetty来运行。结果是能显示Web页，但真正想要调试的API接口都返回404。</p>
<p>研究了一下lean.exe的工作方式，发现它执行lean up后，该进程自己启动了3001端口，提供了一个快速调用API的web页。真正的云业务页面和API服务是它调用<code>mvn jetty:run</code>来运行的，默认是3000端口。而maven是用的开发者自己配置的路径，实际上执行的<code>mvn.cmd jetty:run</code>启用了一串如下java命令：</p>
<figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"D:\Program Files\Java\jdk1.<span class="number">8</span>.<span class="number">0</span>_92\bin\java.exe" -classpath "d:\work\maven\bin\..\boot\plexus-classworlds-<span class="number">2</span>.<span class="number">5</span>.<span class="number">2</span>.jar" "-Dclassworlds.conf=d:\work\maven\bin\..\bin\m2.conf" "-Dmaven.home=d:\work\maven\bin\.." "-Dmaven.multiModuleProjectDirectory=D:\svnwork\playground\loanassistant-cloud" org.codehaus.plexus.classworlds.launcher.Launcher jetty:run</span><br></pre></td></tr></table></figure>
<p>分析到这里就有办法了：<strong>java是可以通过参数开启远程调试的，只要把java的调试参数配置在<code>mvn.cmd</code>中，应该就可以调试真正的业务接口了</strong>。</p>
<p>打开<code>mvn.cmd</code>文件，其中这行是真正的执行语句</p>
<figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">%MAVEN_JAVA_EXE%</span> <span class="variable">%JVM_CONFIG_MAVEN_PROPS%</span> <span class="variable">%MAVEN_OPTS%</span> <span class="variable">%MAVEN_DEBUG_OPTS%</span> -classpath <span class="variable">%CLASSWORLDS_JAR%</span> "-Dclassworlds.conf=<span class="variable">%M2_HOME%</span>\bin\m2.conf" "-Dmaven.home=<span class="variable">%M2_HOME%</span>" "-Dmaven.multiModuleProjectDirectory=<span class="variable">%MAVEN_PROJECTBASEDIR%</span>" <span class="variable">%CLASSWORLDS_LAUNCHER%</span> <span class="variable">%MAVEN_CMD_LINE_ARGS%</span></span><br></pre></td></tr></table></figure>
<p>在其上增加一条java调试参数<code>-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005</code>然后加入命令行中</p>
<figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> EXT_OPTS="-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=<span class="number">5005</span>"</span><br><span class="line"></span><br><span class="line"><span class="variable">%MAVEN_JAVA_EXE%</span> <span class="variable">%JVM_CONFIG_MAVEN_PROPS%</span> <span class="variable">%MAVEN_OPTS%</span> <span class="variable">%MAVEN_DEBUG_OPTS%</span> -classpath <span class="variable">%CLASSWORLDS_JAR%</span> "-Dclassworlds.conf=<span class="variable">%M2_HOME%</span>\bin\m2.conf" "-Dmaven.home=<span class="variable">%M2_HOME%</span>" "-Dmaven.multiModuleProjectDirectory=<span class="variable">%MAVEN_PROJECTBASEDIR%</span>" <span class="variable">%EXT_OPTS%</span> <span class="variable">%CLASSWORLDS_LAUNCHER%</span> <span class="variable">%MAVEN_CMD_LINE_ARGS%</span></span><br></pre></td></tr></table></figure>
<p>大功告成</p>
<p>这时候运行<code>lean up</code>发现多了一行提示，表示已经打开了<code>5005</code>端口用于调试java<br><img src="/2016/12/16/使用IDEA单步调试Leancloud云引擎服务/00-47-20.jpg"></p>
<p>接下来在IDEA中增加Run Remote的配置，其默认的参数即是<code>5005</code>端口<br><img src="/2016/12/16/使用IDEA单步调试Leancloud云引擎服务/00-50-03.jpg"><br>运行刚才的配置<br><img src="/2016/12/16/使用IDEA单步调试Leancloud云引擎服务/00-51-13.jpg"><br>在想要调试的函数中加个断点，通过<code>http://localhost:3001</code>页面测试调用<br><img src="/2016/12/16/使用IDEA单步调试Leancloud云引擎服务/00-53-00.jpg"><br>断点成功，舒服了！</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cpiz.com/2016/12/15/使用Kotlin语言写Leancloud云后台服务/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cpiz">
      <meta itemprop="description" content="Cpiz's blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cpiz's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/15/使用Kotlin语言写Leancloud云后台服务/" itemprop="url">
                  使用Kotlin语言写LeanCloud云后台服务
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-12-15 23:53:00" itemprop="dateCreated datePublished" datetime="2016-12-15T23:53:00+08:00">2016-12-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-05-24 14:49:03" itemprop="dateModified" datetime="2018-05-24T14:49:03+08:00">2018-05-24</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/category/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近在玩微信小程序，有一部分业务需要部署后端，为了省事我选择了LeanCloud。它有多种语言支持，文档也很完善，能快速搭建服务，正好合适。其后端云引擎支持Node.js、Python、Java、Php四种语言，因为我近来写Android多一些，所以采用了更熟悉的Java。</p>
<p>下载了SDK来一看，是基于maven构建，用法挺简单。但我的云服务需要用到的一个算法是我以前在Android上用Kotlin写的，为了避免重新翻译，我尝试将Kotlin也引入云引擎项目，果然可行。在这记录分享一下。</p>
<p>整个修改分为三步</p>
<h2 id="1-pom配置"><a href="#1-pom配置" class="headerlink" title="1. pom配置"></a>1. pom配置</h2><p>增加kotlin的依赖与maven-plugin的配置<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jetbrains.kotlin<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>kotlin-stdlib<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            ...</span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jetbrains.kotlin<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>kotlin-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">id</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span> <span class="tag">&lt;<span class="name">goal</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">goal</span>&gt;</span> <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">sourceDirs</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">sourceDir</span>&gt;</span>$&#123;project.basedir&#125;/src/main/kotlin<span class="tag">&lt;/<span class="name">sourceDir</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">sourceDirs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">id</span>&gt;</span>test-compile<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span> <span class="tag">&lt;<span class="name">goal</span>&gt;</span>test-compile<span class="tag">&lt;/<span class="name">goal</span>&gt;</span> <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">sourceDirs</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">sourceDir</span>&gt;</span>$&#123;project.basedir&#125;/src/test/kotlin<span class="tag">&lt;/<span class="name">sourceDir</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">sourceDirs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            ...</span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>所以工程的文件结构是这样的<br><img src="/2016/12/15/使用Kotlin语言写Leancloud云后台服务/1.png"></p>
<h2 id="2-翻译AppInitListener类为Kotlin语言版"><a href="#2-翻译AppInitListener类为Kotlin语言版" class="headerlink" title="2. 翻译AppInitListener类为Kotlin语言版"></a>2. 翻译AppInitListener类为Kotlin语言版</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cpiz.loanassistant.cloud</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.LeanCloud.LeanEngine</span><br><span class="line"><span class="keyword">import</span> com.avos.avoscloud.AVOSCloud</span><br><span class="line"><span class="keyword">import</span> com.avos.avoscloud.<span class="keyword">internal</span>.impl.JavaRequestSignImplementation</span><br><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.LogManager</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextEvent</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextListener</span><br><span class="line"><span class="keyword">import</span> javax.servlet.<span class="keyword">annotation</span>.WebListener</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppInitListener</span> : <span class="type">ServletContextListener &#123;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> appId = System.getenv(<span class="string">"LeanCloud_APP_ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> appKey = System.getenv(<span class="string">"LeanCloud_APP_KEY"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> appMasterKey = System.getenv(<span class="string">"LeanCloud_APP_MASTER_KEY"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">contextDestroyed</span><span class="params">(arg0: <span class="type">ServletContextEvent</span>)</span></span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">contextInitialized</span><span class="params">(arg0: <span class="type">ServletContextEvent</span>)</span></span> &#123;</span><br><span class="line">        logger.info(<span class="string">"LeanEngine app init."</span>)</span><br><span class="line">        logger.info(<span class="string">"Environment: <span class="subst">$&#123;System.getenv("LeanCloud_APP_ENV")&#125;</span>"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 初始化AVOSCloud，请保证在整个项目中间只初始化一次</span></span><br><span class="line">        LeanEngine.initialize(appId, appKey, appMasterKey)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在请求签名中使用masterKey以激活云代码的最高权限</span></span><br><span class="line">        JavaRequestSignImplementation.instance().setUseMasterKey(<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 向云引擎注册云函数</span></span><br><span class="line">        <span class="comment">// com.cpiz.loanassistant.cloud.CloudKt即为云函数的实现</span></span><br><span class="line">        LeanEngine.register(Class.forName(<span class="string">"com.cpiz.loanassistant.cloud.CloudKt"</span>))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (System.getenv(<span class="string">"LeanCloud_APP_ENV"</span>) == <span class="string">"development"</span>) &#123;</span><br><span class="line">            <span class="comment">// 打开 debug 日志</span></span><br><span class="line">            AVOSCloud.setDebugLogEnabled(<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 如果是开发环境，则设置 AVCloud.callFunction 和 AVCloud.rpcFunction 调用本地云函数实现</span></span><br><span class="line">            <span class="comment">// 如果需要本地开发时调用云端云函数实现，则注释掉下面语句。</span></span><br><span class="line">            LeanEngine.setLocalEngineCallEnabled(<span class="literal">true</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">val</span> logger = LogManager.getLogger(AppInitListener::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-开始使用Kotlin写云函数"><a href="#3-开始使用Kotlin写云函数" class="headerlink" title="3. 开始使用Kotlin写云函数"></a>3. 开始使用Kotlin写云函数</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cpiz.loanassistant.cloud</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.LeanCloud.EngineFunction</span><br><span class="line"><span class="keyword">import</span> cn.LeanCloud.EngineFunctionParam</span><br><span class="line"><span class="keyword">import</span> ......</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 测试云函数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@EngineFunction</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">hello</span><span class="params">()</span></span>: String &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Hello world!"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>至此结束，原本的目的只是想让算法那部分直接用Kotlin的实现，但最终做到了使用Kotlin编写整个项目，开发效率可比Java高多了。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cpiz.com/2016/12/15/moved_to_farbox/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cpiz">
      <meta itemprop="description" content="Cpiz's blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cpiz's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/15/moved_to_farbox/" itemprop="url">
                  博客迁移至Farbox平台
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-12-15 19:49:00" itemprop="dateCreated datePublished" datetime="2016-12-15T19:49:00+08:00">2016-12-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-05-24 15:30:56" itemprop="dateModified" datetime="2018-05-24T15:30:56+08:00">2018-05-24</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/category/建站/" itemprop="url" rel="index"><span itemprop="name">建站</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近几年，空闲的时间越来越少，已经很少再写博客，只是偶然会翻起。从2005至2016，12年一晃而过，因为有博客，那些记忆和心情还冻结在那里，仿佛是昨天。</p>
<p>玩了十二年博客，它曾经属于微软（MsnSpace）、Google（Blogger），然后是自己搭的PJBlog、Wordpress，我从一个充满好奇跃跃欲试的青年，终于变成了一个仍然好奇但再无法在时间上奢侈的中年。我不想再要什么模板、动态、图片，能安安静静想点东西，趁它们没那么快健忘，来得及记录就好。所以越来越喜欢Markdown，可以让人先把东西写下来，再去管格式。</p>
<p>最近突然想重新开始记录，不愿意再面对WP那个愚蠢的编辑器，又舍不得以前那么多老文章，发现Farbox迁移成本最低。虽然丢失了评论，一些文章的图片和下载有问题，但没关系，最宝贵的是文字。</p>
<p>Farbox肯定也不是折腾的终点，我大胆的预测一下：未来的互联网，不管用户使用了哪公司的服务，用户创造的内容是会永远跟随他自己的。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cpiz.com/2014/01/29/菜鸟追车记，3个月尊瑞驾驶感受/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cpiz">
      <meta itemprop="description" content="Cpiz's blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cpiz's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/01/29/菜鸟追车记，3个月尊瑞驾驶感受/" itemprop="url">
                  菜鸟追车记，3个月尊瑞驾驶感受
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2014-01-29 23:32:34" itemprop="dateCreated datePublished" datetime="2014-01-29T23:32:34+08:00">2014-01-29</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-05-24 15:04:32" itemprop="dateModified" datetime="2018-05-24T15:04:32+08:00">2018-05-24</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/category/生活/" itemprop="url" rel="index"><span itemprop="name">生活</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这是我投在汽车之家的作业贴，应该算是13年唯一比较正式的一篇东西，贴到博客上来保存记录</p>
<h1 id="立念"><a href="#立念" class="headerlink" title="立念"></a><strong>立念</strong></h1><p>按家乡风俗，男人通常在逢九那年过大生日，我生于八四零九，日前已三十而立。在生日的前一个月，我收获了人生的第一部车——凯美瑞尊瑞2.5HG。这是份宝贵的大礼，抢在了下一代还没落地之前，给生活注入了新的激情和色彩。</p>
<p>身为一个理工宅，在28岁之前对汽车没一点追求，这让一毕业就拿了驾照的老婆觉得很奇怪，笑我“兴（趣）取向”不正常。我在回忆里搜索了一下，这大概和我儿时强烈的晕车毛病有关，也受到了身边因车祸而改变了人生的两个亲友的影响，玩赛车游戏我可以热血沸腾，拥有一辆的想法却被束之高阁，总觉着很遥远。</p>
<p>明日复明日，毕业了、结婚了、买房了，房子和我公司的路程才十五分钟，而我和我老婆的公司才相距不到百米，在别人挤公交挤地铁各自发誓一定要买车不再受气的时候，我俩天天牵手上下班，再远点的距离就租个免费自行车好不悠哉。</p>
<p>可在大城市，人不可能在一家公司干一生，公司也不可能在一栋楼租到永远，度过了两年我认为人生最自在的时光后，空间的问题终于开始困扰我们。</p>
<p>我换了更好的单位，依旧十五分钟路程，但必须得两轮。朝暮骑行身影虽矫健，也难免风雨里狼狈。坐公交？可惜走三趟转两道反而时间数倍。</p>
<p>老婆单位也将要换更好的大楼，依旧十五分钟路程，还得四轮才行……趁没搬离，有时我下班绕来载她，自以为甜蜜蜜，直到一天大概是将她颠坏，说“我不想三十岁了还坐自行车后座”，将我一厢情愿打碎。</p>
<p>好好想了想，是该买个车了，方便接送老婆，以后还会有孩子，父母来广州玩也不用再带他们转公交钻地铁。对自己而言，车是腿的延伸，从此广州不是只有天河体育中心一个商圈，一天内广佛东深随便来回，一个周末便能享受广东大部分的景点。</p>
<h1 id="学车"><a href="#学车" class="headerlink" title="学车"></a><strong>学车</strong></h1><p>等产生买车的念头，早已过了最佳学车的时机。如果当年读大学时花愿意两千块和一个星期，如果刚来广州时愿意花四千块和三个月，怎会沦到当下要花六千块加近一年的繁琐。</p>
<p>去年10月，通过朋友的推荐，找到一位好教练，愿意认真地教授车内车外各种知识。只是因为工作紧张，只有周末有空闲，平时都到凌晨两点多才睡，周六早晨7点半起床实在苦不堪言，迷迷糊糊的脑子用一杯咖啡浇醒，车子怎么起步都得回忆半天。</p>
<p>幸好手脑还算灵光，理工男品质也发挥出来，很快喜欢上操控这种四轮机械的感觉，开始希望能拥有一台自己的车。只是学车靠自己，排考靠大家，每训练好一个环节，后面都是一两个月的等待，只能心里干灼急……</p>
<h1 id="摇号，选车"><a href="#摇号，选车" class="headerlink" title="摇号，选车"></a><strong>摇号，选车</strong></h1><p>广州从去年7月份开始限购，从路人到车主的路上，拦在面前的除了驾照，还有指标书一张。报名学车的同时，我用老婆的驾照申请了摇号，估摸着按当时1/16的概率，只要运气不是太差，等我拿到驾照之后，指标也应该到手了。</p>
<p>老天开了一个善意的玩笑，只用了3个月我们就获得了指标，13年8月26号之前必须购车。这结果让我们哭笑不得，太早买的话用不着（后来证明这想法是太Simple了），放弃的话老婆两年内不能再参加摇号，等我自己的驾照出来再摇不知得等到猴年马月了。</p>
<p>好，那就开始选车。</p>
<p>最初想主要用于日常代步，节假出游，又是新手，买个十五六万的A级车差不多了，过几年再换更好的。向身边有车的朋友征求建议，结果几乎所有人都推荐一步到位上B级车。其中有一个理由动摇了我：反正早晚是要升级，就是差个几万块钱，但一年后宽裕了再想换车到时候肯定舍不得，开几年再换又心理不甘，而且当时还有换车后排量能降不能升的担忧。最后老婆鼓励了一下：”买个好点的吧，30w以内都可以，当作给你30岁的生日礼物“，遂美滋滋更换目标。</p>
<p>当时我对汽车的了解仅限于认识车标，这才开始泡汽车之家、新车评，恶补知识。在学车的同时，也开始了漫长反复的看车之路。</p>
<p>我们初定的筛选的标准：</p>
<blockquote>
<p>落地30W以内，尽量别太贵</p>
<p>只在城市活动，相比SUV，更倾向轿车</p>
<p>不考虑韩国品牌，缺乏信心</p>
<p>不考虑国产品牌，缺乏信心</p>
<p>尽量非日本品牌，我不仇日，但怕仇日的愤怒青年<br>以上无论如何，车必须有亮点，可以是最帅、最精致、性能最好、最经济、最有科技感……总之拒绝平庸。</p>
</blockquote>
<p>实际证明，选车过程很难做到完全理性，也没有完美的车，最后的结果往往偏离预期很大。这其中，就留给了汽车软文、广告、销售人员很大的影响空间。</p>
<p>最开始，我看中了朋友推荐的新蒙迪欧。当时只有图片可看，一眼就被它潇洒的线条所吸引，还有那犀利的大灯，憨憨的大嘴。接着看了新车评关于老蒙的视频与文章，知道机械性能也很强大，符合理工宅要求。决定将看车的处女行献给福特，先看看老蒙情况，也打听打听新蒙消息。找了一个周末下午来到黄埔大道东的翰福，可能我们穿着太屌丝（我平常都是T恤短裤拖鞋、老婆每天双肩包牛仔裤），完全没工作人员来搭理。转了一圈展厅没见老蒙，只好主动咨询销售，感觉不是很热情，在我表露出对新蒙有意后也没想着主动建立联系，而且一问三不知。好，那等有新消息再来。</p>
<p>相信朋友们都有经历，伴随买车的念头从无到有，人走在路上，也有一个从对汽车毫不在意到念念不忘的变化。以前那些看起来都差不多的铁壳盖轮子，一下变成了缤纷的奥迪、丰田、现代、小型车、中型车、SUV……，人也会开始去记忆车的品牌和型号。某天骑行路上，看见个好漂亮的SUV屁股，只记住了本田和一个单词Cross。后来查到它叫歌诗图(Crosstour)，也不是SUV，是介于SUV和轿车的旅行车。找个周末拉上老婆逛本田4S，不等我指引，她也瞬间被这车所吸引，我也是第一次近距离感受它。这车前脸大气、后尾性感、拉丝内饰精致、座舱和后尾空间都超赞，完全给人一个豪华车的感觉，竟然只卖26w。原来对日本车的那份担心，在如此的触手可及面前立即变得薄如轻烟，而且瞬间找好了理由：广州是日本车的大本营（广丰、广本），而且广州素来开放，没那么容易有事的……（节操啊）</p>
<p>新蒙有了对手，我的心思也活了起来：既然不再介意日本车，那再考虑考虑尊瑞？尊瑞首次印象是去年年底在电梯里看到的广告，而且内容还全都记得，百分百中签、厂家优惠3w、政府还补贴1w，省油环保而且还堪比3.0发动机的动力，这车有这么神？一了解真吃了一惊，这是新车评网史上评价最高的长测车，丰田的混合动力技术已经经过国外市场检验可以不用担心，电池也给8年20w公里保修，而且广州有全国最高的3.6w优惠加1w政府补贴，太有诱惑力了。瞬间我又找到了放弃歌诗图的理由：太长太宽不适合我新手，而且车重油耗高……（节操）</p>
<p>中间还关注了一阵迈腾，为它的精致内饰和空间所倾倒，不过315曝光DSG问题后大众大事化小小事化了的表现让我觉得很不放心，不敢考虑。</p>
<h1 id="购车"><a href="#购车" class="headerlink" title="购车"></a><strong>购车</strong></h1><p>五月份时候，在另一家福特4S得到新蒙七月份即将上市的消息，出于对老蒙的信心和新车配额与指标期限的担忧，在没见过样车甚至不知道定价的情况下，我预定了新蒙200P豪华版（协议要求必须保证七月份提车否则全额退订金），开始天天在之家新蒙版块守望。不知是因为水军多还是脑残太多，新蒙论坛每天乌烟瘴气，各种口水谩骂，偶尔出几个理性分析的帖子也被黑成车托，最后导致了回帖必须附上一段“车托全家火葬场”的诅咒才能证明自身清白。偶尔到凯美瑞版块潜水倒是一片和谐，搜索关键字“故障”找到的结果也不算多，尊瑞更是一片赞声。考虑到新蒙跳票的风险，将尊瑞作为备胎倒是一个不错的选择，起码它是广州生产、货源充足，订车不用等太久而导致指标过期。</p>
<p>期间又反复读了新车评的尊瑞长测，也更多的了解了能量回收、动力策略还有ECVT变速箱的工作原理，越发觉得精妙，在真正的新能源技术还遥遥无期的情况下，丰田这套混动的机理简直就是唯一正确的设计！抽空去丰田4S看了展车，虽然感觉外观实在没个性，但对它的内饰和空间都非常满意，很喜欢那仿碳纤维面板的材质颜色（相比普凯的桃木风格则完全不能接受）。销售蔡M的表现非常专业，很干脆地解答了我们所有疑惑，包括优惠、能否享受政府补贴、提车时间、贷款方案，回家后我们正式确定将尊瑞HG列为第一备胎。</p>
<p>不知是不幸还是有幸，新蒙上市的时间果然越推越迟，销售终于打电话通知我正式提车时间为八月底，我是第一批，但这个结果已毫无意义。</p>
<p>新蒙无缘，只好买尊瑞了！7月6号，再次来到丰田第一店，参照网友们的购车价格，很快谈到尊瑞HG珍珠白加装4S的那套科技版套装（包括导航、CMMB电视、液晶头枕、日行灯、座椅通风、中置喇叭、后视镜自动翻转折叠）、人保保险、送贴膜抱枕地毯方向盘锁，最终含政府补贴落地价25.4w（后来还是发现亏了先不表），销售承诺一个月内到车。</p>
<p>以上，终于完成了我的选车之路，而整个过程，我因为一直没拿到驾照，只能试乘，未能试驾过任何一辆。</p>
<h1 id="提车"><a href="#提车" class="headerlink" title="提车"></a><strong>提车</strong></h1><p>7月31号终于等来了电话，通知我8月2号可以提车，而这一天，正好是我驾考最后一个科目以及发证的时间，这不得不说是一个奇妙的巧合。就这样，我上午去车管所考安全文明、宣誓、领证，随后打车到4S见我爱车第一面。</p>
<p>一店的车库原来是在麦德龙停车场的最顶层，停满了新车，我那辆就静静地趴在那，那么普通，那么特别。蔡M给了钥匙让我验车，我一驾照还没揣热的人又紧张又懵懂，只知道一定不能松驻刹不能乱挂档，手忙脚乱搞一通加上车子暴晒一上午炎热无比很快就满身大汗的出来了。</p>
<p>回到店里交好尾款，理论上这车已经完全归我，可以当天开走。考虑到对新车不熟悉，办牌手续和加装配置没有完成，还是留在了店里。</p>
<p>8月12号，应4S安排跟一批丰田新车主到水荫路车管所集体办牌，尝试N次后选了一个对自己有意义的牌号。</p>
<p>8月14号，4S来电通知自选的配置已加装完毕，终于可以正式提车！约了朋友翘班来帮忙，刚好赶上台风，匆匆到店后销售给给了一叠文件讲了一堆东西也没太听进去，没有很激动，只是感觉不太真实，就这样我就车主了？</p>
<p>车开回家后我两天没敢动，等到周末才把朋友再约出来带我练练。好在驾校还是学了点东西，很快就顺手了。</p>
<h1 id="用车感受"><a href="#用车感受" class="headerlink" title="用车感受"></a><strong>用车感受</strong></h1><p>不知不觉尊瑞已经开了三个多月，期间上下班通勤、周末出游、国庆来回一趟江西老家，目前里程将近5000公里，刚做完了首保。这篇作业也拖拖拉拉写了两个多月，因为各种原因和借口一直没有提交。这里再结合我一个菜鸟司机的成长历程，写一点尊瑞感受：</p>
<p>最深刻的感受是安逸，这一点不得不夸。</p>
<p>坛子里有朋友发过各种算法：一年要开多少公里，多少年后能把尊瑞相比普凯的溢价赚回来。买车前我也结合自己的情况计算过，但开过一段时间后，发现这个念头完全可以抛开。混合动力是比普凯省油，但这个省油不是冷冰冰的数字，而是相比其他2.5L的汽油车主来说完全不一样的轻松心情。</p>
<p>咱这个收入级别的人，身边朋友也大都开30w以内的车，油耗免不了是日常的话题之一，君不见每次油价调整都会激起Q群里大片的讨论。相比起其他车友的敏感，尊瑞车主确实淡定很多。就算不谈油价，每个月少去一次加油站排队也省心不少。</p>
<p>尊瑞的仪表设计其实很有心机，取消了发动机转速表，却有中控动力示意图、行车电脑小屏、右侧的油耗表、左测的动力表至少4个地方全方位暗示你我在省油我很省油，到达目的地后还发一朵“燃油经济性优”的小红花鼓励，就差学360再提示一个“你的油耗打败了全国XX%车主”。在这种暗示下，新车主都会经过一个改善驾驶习惯挑战极限油耗的“自我培训”过程，一段时间后新鲜劲过了可能不再理会，但这时候已经建立起了对尊瑞省油能力的信任，同时养成了对油耗完全不在乎的心态。这种心态带给我的是想去哪就去哪的自由，没事也愿意去阅江路兜个风散散步，走错路也毫无负担。</p>
<p>省油还好说，而尊瑞纯电动行驶时的安静却是不好形容。汽车发明了一百多年，我们对它的印象就是应该嗡嗡作响，性能跑车们甚至以此为荣，突然遇到一辆光滑行不出声的车，这种感觉是很新鲜的，每一个初次试驾我车的朋友都会疑问：”这真的启动了？“，当我习惯了这种设定之后，很快感受到它带来的好处。</p>
<p>路上堵车、等红灯，车窗外其他的车嗡嗡颤抖，尊瑞却悄悄熄了火，安逸。前车一动则悄然起步，从容。</p>
<p>小区路窄，行人背后尊瑞静静跟随，也许是自我陶醉，总觉得路人惊觉后瞥来的目光里带着温暖。没它之前，我也做了近30年路人，也希望多遇到点这样的车治愈一下惊吓过的心灵。</p>
<p>驾驶尊瑞，我愿意做个好司机，我文明礼让，你低碳环保。</p>
<h2 id="无图无真相"><a href="#无图无真相" class="headerlink" title="无图无真相"></a>无图无真相</h2><p>尊瑞的外观从开始就感觉平平无奇，买来后看得多了变得稍微顺眼，但仍不算一辆漂亮的车，提不起拍照的欲望。只是偶尔它讨好心情时，用手机记录一张。就喜欢它静静地趴在那里，随时带我去想去的地方。</p>
<p><img src="http://club1.autoimg.cn/album/userphotos/2013/12/14/500_9968_abd19adc_abd19adc.jpg" alt=""><br>到手的第二个周末，它带我去南沙吃海鲜，从此游玩终于不再受限。</p>
<p><img src="http://club0.autoimg.cn/album/userphotos/2013/12/14/500_9683_efa0873e_efa0873e.jpg" alt=""><br>小区车位紧张，一直停在外面，这是第一次带它回家时拍的。</p>
<p><img src="http://club1.autoimg.cn/album/userphotos/2013/12/14/500_8155_db9f1614_db9f1614.jpg" alt=""><br>第一次从这个角度看广州的桥</p>
<p><img src="http://club0.autoimg.cn/album/userphotos/2013/12/14/500_89d0_3db08c10_3db08c10.jpg" alt=""><br>国庆的时候，起个大早，它带我奔行800公里回老家，再也不为买票愁</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cpiz.com/2013/01/20/一把$100的刷子——Clarisonic Mia拆解与修复/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cpiz">
      <meta itemprop="description" content="Cpiz's blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cpiz's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2013/01/20/一把$100的刷子——Clarisonic Mia拆解与修复/" itemprop="url">
                  一把$100的刷子——Clarisonic Mia拆解与修复
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2013-01-20 17:24:00" itemprop="dateCreated datePublished" datetime="2013-01-20T17:24:00+08:00">2013-01-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-05-24 15:04:32" itemprop="dateModified" datetime="2018-05-24T15:04:32+08:00">2018-05-24</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/category/项目/" itemprop="url" rel="index"><span itemprop="name">项目</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <img src="/2013/01/20/一把$100的刷子——Clarisonic%20Mia拆解与修复/Clarisonic-Mia-lgn.jpg">
<p>家里有把叫Clarisonic Mia的刷子，是LP大人花100刀从美帝淘回来的宝贝。这宝贝的毛刷据说能以声波的频率振动，清毛孔去黑头什么什么的就跟橡皮擦一样，手感扎实线条性感全身防水，还是时髦的无线充电技术，LP大人每天刷脸爱不释手。</p>
<p>好景不长，用了三个月，昨天充电时开始出现约每秒一次的振动，指示灯也不闪，十几个小时之后毫无效果。一搜发现这问题还比较普遍，有的运气好充一会儿就恢复了，有的就此Over。海淘有海淘的风险，Clarisonic不支持全球联保，来回美国一趟又得花去300大洋。</p>
<p>看着LP大人一脸的不开心，也为了钱包考虑，我尝试着拆解修复一下。可惜找遍国内国外，没有发现任何关于拆解的介绍（果然是女人用的东西），只能硬着头皮上。</p>
<p>过程记录如下，希望对苦逼的男同胞们有帮助。事后补录，中间忘了拍照。</p>
<p>——————– 我是撬不开的分割线 ———————</p>
<p>Clarisonic Mia全身没一个螺钉，从边缝撬了半天纹丝不动，干脆打了个孔。结果发现外壳厚度至少有4mm，前后盖之间是极其完美的粘接。遂改方法为热切割：将美工刀片用燃气烧热，垂直切割边缝一周。完成后仍然无法分离，强行撬开后发现内部还用了多处白色的胶体来粘结。</p>
<p>所有元件均附着在前盖，头部是两片交叉成X形的簧片，上两端固定，下两端是铁件并连接一根曲柄输出。中部是一个W形的电磁铁，顶部两极与X簧片的铁件隔空对应。刷子的工作原理应该是快速变换电磁铁的两级来驱动簧片左右摆动，最后输出至曲柄连接的刷头。下部是两节串联的白色平头电池，型号为NiMh-AA-2-900-PB3（镍氢！怎么不用锂电？），电池极点是钢焊。</p>
<p>拆下电池用万用表测量电压才零点几伏，换上一对南孚后刷子又开始嗡嗡工作（试过外接电源，振动频率异常，推测应该是整流不干净），说明机器本身没问题。折腾了一下这一对小白，重新接入，粘上无线充电器，竟然恢复充电了！看来之前应该就是电池过放造成的无法充入。100刀的东西如果是为了安全使用镍氢电池可以理解，但无线充电都用上了，充放保护怎么这么差？</p>
<p>充电一夜后可以恢复工作，基本判断问题已解决，开始复原。手头上可用的胶水只有热熔枪，先将电池粘牢在电路板，然后用美工刀将前后盖的外缘削出斜面，使两盖合并后接缝呈外宽内窄的沟状，便于胶水深入。再用热熔胶填满一周，最后打磨边缘、削去凸出的胶水。还有之前撕掉了开关处的胶片，重新粘回去。至此——密封应该凑合了吧……最后是这个样子</p>
<img src="/2013/01/20/一把$100的刷子——Clarisonic%20Mia拆解与修复/2013-02-19-21.42.53-11.jpg">
<img src="/2013/01/20/一把$100的刷子——Clarisonic%20Mia拆解与修复/2013-02-19-22.25.27-1.jpg">
<img src="/2013/01/20/一把$100的刷子——Clarisonic%20Mia拆解与修复/IMG_0168.jpg">
<p>一些后话：</p>
<ol>
<li>Clarisonic的外形设计、注塑工艺、表面处理、内部粘焊都是精工细致，无可挑剔</li>
<li>Clarisonic这种一体化的工艺，压根就没考虑过维修问题，保修只能换新</li>
<li>女人的钱好赚，就算它如此牛逼的工艺和设计卖$100还是太贵了，￥200差不多</li>
</ol>
<p>2013/06/16 update：</p>
<p>这问题后来又折腾了我两次，其实很好解决，拆开后用个3-5v电源（比如锂电或USB）接触电池对应两极3-5秒进行激活，然后就能正常无线充电了。最后我干脆接了两条引线出来，丑虽丑点，一劳永逸。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cpiz.com/2012/11/05/漂洋过海去看你·沙巴（三）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cpiz">
      <meta itemprop="description" content="Cpiz's blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cpiz's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/11/05/漂洋过海去看你·沙巴（三）/" itemprop="url">
                  漂洋过海去看你·沙巴（三）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2012-11-05 00:20:07" itemprop="dateCreated datePublished" datetime="2012-11-05T00:20:07+08:00">2012-11-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-05-24 15:04:32" itemprop="dateModified" datetime="2018-05-24T15:04:32+08:00">2018-05-24</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/category/生活/" itemprop="url" rel="index"><span itemprop="name">生活</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Day-2-亚庇-–-环滩岛"><a href="#Day-2-亚庇-–-环滩岛" class="headerlink" title="Day 2 亚庇 – 环滩岛"></a>Day 2 亚庇 – 环滩岛</h1><p>五点半被闹钟叫醒，开门看天，有戏！</p>
<p>来到海边，静静等待。<br><a href="http://www.yupoo.com/photos/cpiz/87081311/" title="日将出" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8lHQd/medish.jpg" alt="日将出"></a></p>
<p>地平线上的云层太厚，看不到日出水，只能等日出云了。</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081314/" title="思考？不，补觉" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8mzIQ/medium.jpg" alt="思考？不，补觉"></a></p>
<p>等！</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081316/" title="来了" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8mNm2/medish.jpg" alt="来了"></a></p>
<p>天空被点燃，快来了！</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081325/" title="幸福的码头" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8ohJp/medium.jpg" alt="幸福的码头"></a></p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081329/" title="1/8000快门，最小光圈，相机极限" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8oK0a/medium.jpg" alt="1/8000快门，最小光圈，相机极限"></a></p>
<p>一出生则不可直视。</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87112464/" title="跳跃" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CojMGA4H/medium.jpg" alt="跳跃"></a></p>
<p>太阳底下没有新鲜事，所以有装逼青年↑，也一定会有二逼青年↓</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87112468/" title="二逼青年" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CojNhvC7/medium.jpg" alt="二逼青年"></a></p>
<p><a href="http://www.yupoo.com/photos/cpiz/87112472/" title="装逼青年" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CojNVujb/medium.jpg" alt="装逼青年"></a></p>
<p><a href="http://www.yupoo.com/photos/cpiz/87112471/" title="阳光下走来" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CojNMH0X/medium.jpg" alt="阳光下走来"></a></p>
<p><a href="http://www.yupoo.com/photos/cpiz/87112477/" title="可怜的摄影师" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CojOwtFs/medium.jpg" alt="可怜的摄影师"></a></p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081332/" title="睡醒了吗？" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8piHA/medium.jpg" alt="睡醒了吗？"></a></p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081334/" title="装酷" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8pFNi/medium.jpg" alt="装酷"></a></p>
<p>早晨后，5人开始环岛一周的壮举。</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87115840/" title="123跳" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/Colni1MQ/medium.jpg" alt="123跳"></a></p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081339/" title="大跃进青年" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8qkeq/medium.jpg" alt="大跃进青年"></a></p>
<p>环岛一周全是海滩，遇到各种活物死物。无论是何者，和不息的海浪相比都显得无比寂寞，好像怀着无数的故事，在等待愿意倾听且有足够耐心的听众，却不是我们这样的过客。</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081343/" title="携家而行的小蟹" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8qTzl/medium.jpg" alt="携家而行的小蟹"></a><br>携家而行的勤蟹</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081340/" title="疑似睡着的螃蟹" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8qvLK/medium.jpg" alt="疑似睡着的螃蟹"></a><br>疑似宿醉的懒蟹</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081341/" title="曾经也是一条好汉" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8qRZN/medium.jpg" alt="曾经也是一条好汉"></a><br>一节巨鱼（鲸？）的脊骨，曾经也是一条好汉</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081344/" title="朽木" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8racJ/medish.jpg" alt="朽木"></a><br>被小蚌寄生的朽木</p>
<p>终于，过客们要离开这块净土，返回亚庇。<br><a href="http://www.yupoo.com/photos/cpiz/87116576/" title="再见" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/ColHTlJb/medium.jpg" alt="再见"></a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cpiz.com/2012/11/04/漂洋过海去看你·沙巴（二）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cpiz">
      <meta itemprop="description" content="Cpiz's blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cpiz's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/11/04/漂洋过海去看你·沙巴（二）/" itemprop="url">
                  漂洋过海去看你·沙巴（二）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2012-11-04 22:32:21" itemprop="dateCreated datePublished" datetime="2012-11-04T22:32:21+08:00">2012-11-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-05-24 15:04:32" itemprop="dateModified" datetime="2018-05-24T15:04:32+08:00">2018-05-24</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/category/生活/" itemprop="url" rel="index"><span itemprop="name">生活</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Day-2-亚庇-–-环滩岛"><a href="#Day-2-亚庇-–-环滩岛" class="headerlink" title="Day 2 亚庇 – 环滩岛"></a>Day 2 亚庇 – 环滩岛</h1><p>第二天早早起床第一件事就是看天气，似乎不错。洪叔的小弟7点半钟准时到酒店门口接我们去码头，这时天已大亮，一切完美。<br><a href="http://www.yupoo.com/photos/cpiz/87081249/" title="码头" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8c1w2/medium.jpg" alt="码头"></a></p>
<p>终于见到了传说中的洪叔，很精神很Nice的一个阿叔。同行的还有另一个11人的朋友团，登上他的快船，以每小时60公里速度开向环滩岛。轰鸣的引擎+迎面的劲风+飞溅的水花+透亮的蓝天+清澈的海水=飞一般的感觉。</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081250/" title="抵达环滩岛" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8clb8/medium.jpg" alt="抵达环滩岛"></a><br>靠近环滩岛的时候因为海水变浅，颜色也由蓝转绿。</p>
<p>环滩岛正经的名字是Pulau Mengalum（孟加伦岛），距离亚庇56公里，叫环滩岛估计因为全岛地势很低，整个边缘都是海滩的缘故。这是个私人岛屿，据洪叔说岛主正想出售，你要有6000w马币（1.2亿人民币）就可将岛屿和所有设施全部接手，当时我没带那么多钱，想想算了。</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87111620/" title="登岛后受到冰毛巾与冰橙汁接待" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CojdB3pD/medium.jpg" alt="登岛后受到冰毛巾与冰橙汁接待"></a></p>
<p>登岛后受到冰毛巾和冰橙汁的招待，正是雪中送炭的享受。两个工作人员接过我们的行李，领我们到各自的住所——五个人两栋木屋，实在奢侈。<br><a href="http://www.yupoo.com/photos/cpiz/87112465/" title="木屋小径" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CojMXlDb/medium.jpg" alt="木屋小径"></a><br><a href="http://www.yupoo.com/photos/cpiz/87081330/" title="晨中木屋" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8oYXP/medium.jpg" alt="晨中木屋"></a></p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081251/" title="岛上木屋，客厅" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8cqZz/small.jpg" alt="岛上木屋，客厅"></a><a href="http://www.yupoo.com/photos/cpiz/87081252/" title="房间A" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8cyt9/small.jpg" alt="房间A"></a></p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081253/" title="房间B" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8cEis/small.jpg" alt="房间B"></a><a href="http://www.yupoo.com/photos/cpiz/87112642/" title="木屋阳台" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CojZTmoZ/small.jpg" alt="木屋阳台"></a></p>
<p><a href="http://www.yupoo.com/photos/cpiz/87112459/" title="面朝大海，春暖花开" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CojMjUp6/medium.jpg" alt="面朝大海，春暖花开"></a></p>
<p>换装完毕，准备第一次浮潜。</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081255/" title="浮潜去" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8cUtC/small.jpg" alt="浮潜去"></a><a href="http://www.yupoo.com/photos/cpiz/87081256/" title="准备和白肤说再见" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8dfx2/small.jpg" alt="准备和白肤说再见"></a><a href="http://www.yupoo.com/photos/cpiz/87081257/" title="LP" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8ddHS/small.jpg" alt="LP"></a></p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081258/" title="LP" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8dsqb/medium.jpg" alt="LP"></a></p>
<p>重新登上洪叔的船，慢慢开到不远的近海，洪叔一手抓缆绳稳稳的站在船头，手搭凉棚查看合适的浮潜地点，用手势通知舵手。到位，抛锚落定。大家戴上浮潜面罩，逐个下水。水深两三米，就像很多次从电视里看到的一样，底部各种奇形怪状的珊瑚礁，穿梭着各种海鱼。我找洪叔要了条饵鱼，在水里慢慢撕碎，很快就有一群聚了上来围绕我转，可惜没有准备水下相机。</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87112505/" title="浮潜" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CojRCeXk/medium.jpg" alt="浮潜"></a><br><a href="http://www.yupoo.com/photos/cpiz/87112503/" title="浮潜收获" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CojRnrPT/medish.jpg" alt="浮潜收获"></a></p>
<p>浮潜到后程，因为吞了不少海水，感觉想吐，提前翻上船休息。<br><a href="http://www.yupoo.com/photos/cpiz/87081259/" title="水手哥" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8dCvO/medish.jpg" alt="水手哥"></a></p>
<p>回到岛上自助午餐，这时候才注意到，除了几个工作人员，整个岛上才我们十几个游客……除了尝点特色食品外，我的所有精力都用在了咖喱蟹上，直到所有人都放下筷子我还在继续。后来我才知道，什么叫吃海鲜吃到吐……</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87112507/" title="海鲜自助餐" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CojRRkou/medium.jpg" alt="海鲜自助餐"></a><br><a href="http://www.yupoo.com/photos/cpiz/87081261/" title="螃蟹吃到吐啊" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8e9Rq/medium.jpg" alt="螃蟹吃到吐啊"></a></p>
<p>饱餐后恢复体力的众人开始了一套饭后小清新</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081262/" title="饭后小清新" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8efqO/small.jpg" alt="饭后小清新"></a><a href="http://www.yupoo.com/photos/cpiz/87081263/" title="饭后小清新" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8euAt/small.jpg" alt="饭后小清新"></a><br><a href="http://www.yupoo.com/photos/cpiz/87081266/" title="饭后小清新" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8fbOm/medium.jpg" alt="饭后小清新"></a></p>
<p>小清新专用二逼摄影师是也↓<br><a href="http://www.yupoo.com/photos/cpiz/87112321/" title="_1080891" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CojDlZv5/medium.jpg" alt="_1080891"></a></p>
<p>继续在海边发呆，发现一艘疑似美帝航母的军舰，舷号6，兴奋。</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081271/" title="美帝？" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8fZ0L/medish.jpg" alt="美帝？"></a></p>
<p>回来后查资料发现这是美帝的黄蜂级两栖登陆攻击舰USS Bonhomme Richard，排水量45000吨，确实很像航母。</p>
<p>下午继续出浮潜，我游了一会感觉还是晕得不行爬回了船，不过这次没坚持住，哇一声把中午的螃蟹都吐海里了，立刻一大群鱼聚集过来，分享了这顿盛宴……囧rz。</p>
<p>因为当天是个伊斯兰节日，早市上没买到什么海鲜，洪叔决定出海去钓鱼来补充晚餐，愿意的可以一起跟去，不愿意的可回岛自由活动，我们选择了跟随。洪叔凭经验再加声纳找了个好地方，几个助手很快抛出了钩子。钓具很简单，一个线轴、一个鱼钩、一个铅垂，饵是提前准备的小鱿鱼，我们也有样学样跟着摆弄。<br><a href="http://www.yupoo.com/photos/cpiz/87081273/" title="寻找晚餐" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8gvfU/medium.jpg" alt="寻找晚餐"></a></p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081280/" title="重新上饵" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8hAW5/medium.jpg" alt="重新上饵"></a></p>
<p><a href="http://www.yupoo.com/photos/cpiz/87112493/" title="IMG_0895" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CojQkJ5f/medish.jpg" alt="IMG_0895"></a></p>
<p>当水手钓起了第一石斑，全船欢呼。</p>
<p>我一开始根本站不稳，得一只手扶着栏杆放钓，后来大着胆子上了船头，慢慢适应了波动，半蹲着身子也能站住。这里大概6米深度，海底的珊瑚让我钓上来好几块，也有不小心卡住最后丢了钩子或铅垂的时候，不过最后还是让我也钓上来一条石斑。</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87114769/" title="_1080974" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/Col076f3/medish.jpg" alt="_1080974"></a></p>
<p>太阳即将落下的时候，开始回岛，欣赏了一场美丽的日落。</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87112484/" title="自拍夕阳" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CojPe51L/small.jpg" alt="自拍夕阳"></a><a href="http://www.yupoo.com/photos/cpiz/87112491/" title="_1090037" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CojQ1lce/small.jpg" alt="_1090037"></a><a href="http://www.yupoo.com/photos/cpiz/87081300/" title="一路向西" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8jsvL/small.jpg" alt="一路向西"></a><br><a href="http://www.yupoo.com/photos/cpiz/87081294/" title="鸡蛋黄" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8j4na/medium.jpg" alt="鸡蛋黄"></a></p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081301/" title="水也改了颜色" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8jKHF/medium.jpg" alt="水也改了颜色"></a><br>云层开始堆积，水也改了颜色，莫非要下雨？</p>
<p><a href="http://www.yupoo.com/photos/cpiz/87081302/" title="即将出炉的晚餐" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8jUiC/small.jpg" alt="即将出炉的晚餐"></a><a href="http://www.yupoo.com/photos/cpiz/87081305/" title="大虾" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8kxga/small.jpg" alt="大虾"></a><a href="http://www.yupoo.com/photos/cpiz/87081306/" title="烤蟹" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8kPfd/small.jpg" alt="烤蟹"></a></p>
<p>晚餐的主题是烧烤，食物端上桌后，暴雨同时来临。餐厅是个凉棚性质的建筑，巨风卷着雨雾穿堂而过，很快打湿了所有人的皮肤，但仍然没有破坏我们美食的心情。<br><a href="http://www.yupoo.com/photos/cpiz/87081309/" title="风雨无阻的美食心情" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8llme/small.jpg" alt="风雨无阻的美食心情"></a><a href="http://www.yupoo.com/photos/cpiz/87081310/" title="搞定，还有吗？" target="_blank" rel="noopener"><img src="http://pic.yupoo.com/cpiz/CnO8lBgG/small.jpg" alt="搞定，还有吗？"></a></p>
<p>回到了木屋，大家早早睡下，期待暴雨过后还有日出黎明。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Cpiz</p>
              <p class="site-description motion-element" itemprop="description">Cpiz's blog</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">168</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">10</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">230</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/cpiz" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:cpiz@qq.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-cpiz"></i>E-Mail</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Cpiz</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Mist</a> v6.3.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  



	





  





  










  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
